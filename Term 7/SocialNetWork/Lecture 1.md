许多经济、政治和社会互动都受到局部关系结构的影响：
– 商品和服务的贸易，大多数市场并非中心化的！…
– 信息、人情、风险等的共享…
– 病毒、观点的传播…
– 就业信息的获取…
– 行为、教育等的选择…
– 政治联盟、贸易联盟…

• 社会网络影响行为
– 犯罪、就业、人力资本、投票、吸烟…

• 重要的网络结构
– 金融网络
– 线上网络 – Facebook、Twitter、WeChat 等…
– 村庄中的关系

### 综合

• 许多学科文献都涉及对网络的研究
– 经济学
– 社会学
– 计算机科学
– 统计物理学
– 数学（随机图论）
– 流行病学…

### 网络研究的发展

• **重要性**
– 人类是社会性物种
– 社会关系（“关系”）是行为的关键

• **可用性**
– 大量的数据，尤其是在近十年内
– 近年来在数据分析、实验和理论方面的新工具

## 主要问题

### 描述 —— 我们对网络结构了解什么？

### 网络如何影响行为？
- 意见、投资、资产选择、移民等  
- 扩散、营销、金融稳定性、人才配置  

### 网络形成
- 网络是如何形成的？（均衡）  
- 是否形成了“正确的”网络？（效率）  


## 大纲

- **第一部分：背景与基础**
  - 网络的定义与特征（第1、2章）  
  - 实证背景（第3章）  

- **第二部分：网络形成**
  - 随机网络模型（第4、5章）  
  - 战略性网络模型（第6、11章）  

- **第三部分：网络与行为**
  - 扩散与学习（第7、8章）  
  - 网络上的博弈（第9章）  
  …  

（所有章节编号均基于 Jackson (2008)）


## 热身

**问题：在仅有30个节点的情况下，可以有多少个网络？**

---

### 1.2 定义与符号

#### 我们始终面临的一个挑战

**问题：在仅有30个节点的情况下，可以有多少个网络？**

- 个体1可能有29个潜在连接，个体2可能有28个（不计入与1的连接），依此类推，总计 $= 435$  
- 因此共有 $435$ 条潜在的边，每条边要么存在要么不存在  
- 所以：  
  $$
  2 \times 2 \times 2 \ldots \ (\text{435 次}) \ = \ 2^{435}
  $$  
  个网络  

> 顺便一提，宇宙中的原子数：介于 $2^{158}$ 和 $2^{246}$ 之间  

---

### 简化复杂性……

#### 一些值得关注的性质

- **宏观（整体，聚合层面）**
  - 距离/直径  
  - 连通分量  
  - 度分布  

- **微观（局部，个体层面）**
  - 度  
  - 聚类 —— 共同朋友  
  - 中心性（多种定义）  

---

### 网络的表示

**网络 $(N,g)$：**

- $N=\{1,\ldots,n\}$：节点（或顶点、参与者、代理人……）  
- $g \in \{0,1\}^{n \times n}$：邻接矩阵（无权，可能有向）  
- $g_{ij} = 1$：表示 $i$ 与 $j$ 之间存在一条连接、关系或边  
- 替代符号：若 $i$ 与 $j$ 相连，则记为 $ij \in g$  

## 邻域与度

- **邻域（Neighborhood）：**  
  $N_i(g) = \{ j \mid ij \in g \}$  
  （通常约定：$ii \notin g$）  

- **度（Degree）：**  
  $d_i = \# N_i(g)$  

---

## 节点的连接

- **游走（Walk）：**  
  从 $i_1$ 到 $i_K$ 的游走是一个节点序列 $(i_1, i_2, \ldots, i_K)$ 和一系列连接  
  $(i_1i_2, i_2i_3, \ldots, i_{K-1}i_K)$，其中每个 $i_{k-1}i_k \in g$。  

  通常更方便的表示方式是相应的节点序列：  
  $(i_1, i_2, \ldots, i_K)$  

- **路径（Path）：**  
  一个游走 $(i_1,i_2,\ldots,i_K)$，其中每个节点 $i_k$ 都是不同的。  

- **环（Cycle）：**  
  一个游走，且 $i_1 = i_K$。  

- **测地线（Geodesic）：**  
  两个节点之间的最短路径。  

---

## 1.3 连通分量

- 若在 $(N,g)$ 中，任意两节点之间都存在一条路径，则称该网络是**连通的（connected）**。  

- **连通分量（Component）：** 最大的连通子图。  
  - $(N',g')$ 是 $(N,g)$ 的一个子集；  
  - $(N',g')$ 是连通的；  
  - 若 $i \in N'$ 且 $ij \in g$，则 $j \in N'$ 且 $ij \in g'$。  

## 1.4：直径（Diameter）

### 直径与平均路径长度
- 节点彼此有多“近”？  
- 到达一个平均节点需要多长的路径？  
- 信息/疾病传播有多快？……  
- 这如何取决于网络密度等因素？

---

### 直径
- **直径（Diameter）**：最大的测地线长度（即最大的最短路径长度）  
  - 若网络不连通，通常指**最大连通分量**中的直径  
- **平均路径长度（Average path length）**：  
  - 对极端值不那么敏感（**less prone to outliers**）

---

### 直径：示例与数量级

- **$K$ 层（levels）的二叉树**有  
  $$
  n = 2^{K+1} - 1 \ \text{个节点},
  \quad \text{因此} \quad K = \log_2(n+1) - 1,
  $$
  其直径为  
  $$
  2K .
  $$
![[Pasted image 20250919210909.png]]

- **环（ring）** 的直径为  
  $$
  \frac{n}{2} \ \text{或} \ \frac{n-1}{2}.
  $$
![[Pasted image 20250919210952.png]]
- **Cayley（或正则/同质）树**的直径数量级为  
  $$
  2 \log_2(n+1).
  $$

## Cayley 树（Cayley Tree）

**定义**：Cayley 树是一类特殊的树图，其中每个非叶节点都有一个固定数目的分支。若每个非叶节点都有 $n$ 个分支，则称之为 **$n$-Cayley 树**。  

- **2-Cayley 树**：等价于路径图（path graph）。  
- **唯一的 $n$-Cayley 树**：在 $n+1$ 个节点上的唯一 $n$-Cayley 树是**星形图（star graph）**。  

---

### 例子

- **3-Cayley 树**（也称为三价树 *trivalent trees*，二叉树 *binary trees*，或硼树 *boron trees*）  
  - 这些是每个非叶节点的度为3的树。  
  - 节点度数要么为1（叶子），要么为3。  
  - 在 $n=1,2,\ldots$ 个节点上的 3-Cayley 树数量为：  
    $$
    1, \ 1, \ 0, \ 1, \ 0, \ 1, \ 0, \ 1, \ 0, \ 2, \ 0, \ 2, \ 0, \ 4, \ 0, \ 6, \ 0, \ 11, \ldots
    $$
    （OEIS A052120）
![[Pasted image 20250919211652.png]]
- **4-Cayley 树** 和 **5-Cayley 树**：  
  类似定义，每个非叶节点分别具有4或5个分支。

---

### 总结
- Cayley 树是一类**规则树（regular trees）**，在数学、物理和网络科学中广泛使用。  
- 例如，在研究网络直径时，Cayley 树的直径数量级为  
  $$
  2 \log_2(n+1).
  $$

---

### 树中的直径

**命题（Proposition）**：设一棵含有 $n$ 个节点的树中，除叶子外每个节点的度为 $d$（即每个非叶子节点有 $d$ 条边，叶子节点的度为 $d-1$）。则其直径的数量级为
$$
r \sim \frac{\log(n)}{\log(d)}.
$$

**练习（Exercise）**：为什么？试着证明这一点。

## 树中的直径（Diameter in Trees）

- **第1步**：从根节点出发，可以到达 $d$ 个节点；  
- **第2步**：可以到达 $d(d-1)$ 个节点；  
- **第3步**：可以到达 $d(d-1)^2$ 个节点；  
- **第4步**：可以到达 $d(d-1)^3$ 个节点；  
- ……

因此，在 $r$ 步之后，总共大约可以到达  
$$
d^r
$$  
个节点。

---

### 更精确的计算

从根节点向外扩展 $r$ 步（即 $r$ 层），能够覆盖的节点总数为：  

$$
d + d(d-1) + d(d-1)^2 + \cdots + d(d-1)^{r-1}.
$$

这是一个几何级数：  

$$
\text{节点数} = \frac{d\big((d-1)^r - 1\big)}{d-2}.
$$

当 $r$ 较大时，上式近似为：  

$$
(d-1)^r.
$$

---

### 推论：直径数量级

为了覆盖 $n$ 个节点，需要满足：  

$$
(d-1)^r \approx n.
$$

因此直径 $r$ 的数量级为：  

$$
r \sim \frac{\log(n)}{\log(d)}.
$$

### 命题证明

我们将分两步来证明该命题：
1.  **下界证明**：证明对于任何满足条件的树，其直径 $r$ 都满足 $r = \Omega\left(\frac{\log(n)}{\log(d)}\right)$。
2.  **紧性证明**：通过构造一个具体的树，证明存在满足条件的树，其直径 $r$ 满足 $r = O\left(\frac{\log(n)}{\log(d)}\right)$。

---

#### 1. 直径的下界证明

考虑一个满足条件的树 $T$，其节点数为 $n$，非叶子节点度为 $d$，直径为 $r$。

1.  在树 $T$ 中任意选择一个节点 $v$ 作为根。
2.  从根 $v$ 出发，任何其他节点 $u$ 的距离 $dist(v, u)$ 不会超过树的直径 $r$。因此，整棵树都包含在以 $v$ 为中心、半径为 $r$ 的“球”内。
3.  我们来计算这个“球”内最多能有多少个节点。
    *   在距离根 $v$ 为 0 的地方，只有 $v$ 自身，共 1 个节点。
    *   在距离为 1 的地方，最多有 $d$ 个邻居节点。
    *   在距离为 $k$ ($k \geq 1$) 的地方，每个在距离 $k-1$ 处的节点最多有 $d-1$ 个新的子节点（因为它有一个父节点方向的边）。所以，距离为 $k$ 的节点数最多为 $d \cdot (d-1)^{k-1}$。

4.  因此，树的总节点数 $n$ 满足以下不等式：
    $$
    n \leq 1 + \sum_{k=1}^{r} d(d-1)^{k-1}
    $$
    这是一个等比数列求和。当 $d \geq 3$ 时，我们有：
    $$
    \sum_{k=1}^{r} (d-1)^{k-1} = \frac{(d-1)^r - 1}{(d-1) - 1} = \frac{(d-1)^r - 1}{d-2}
    $$
    代入上式可得：
    $$
    n \leq 1 + d \frac{(d-1)^r - 1}{d-2}
    $$

5.  为了分析其数量级，我们可以对该式进行放缩：
    $$
    n < 1 + \frac{d}{d-2}(d-1)^r \leq 1 + 2d \cdot d^r \quad (\text{因为 } d-1 < d \text{ 和 } \frac{d}{d-2} \text{ 是一个常数})
    $$
    $$
    n = O(d^{r+1})
    $$
    对两边取对数（以 $d$ 为底）：
    $$
    \log_d(n) = O(r+1)=O(r)
    $$
    整理后可得：
    $$
    r = \Omega(\log_d(n)) = \Omega\left(\frac{\log(n)}{\log(d)}\right)
    $$
    这就证明了，对于任何满足条件的树，其直径 $r$ 的增长速度至少是对数级的。

---

#### 2. 直径下界的紧性证明

为了证明这个下界是紧的，我们只需要构造一个满足条件的树，其直径恰好是 $\log(n)/\log(d)$ 数量级。

1.  我们构造一棵尽可能“茂密”的树。让一个根节点有 $d$ 个子节点，其他所有非叶子节点都有 $d-1$ 个子节点（总度数为 $d$）。
2.  设这棵树的高度为 $h$（根节点到最远叶子节点的距离）。
3.  计算这棵树的总节点数 $n$。
    $$
    n = 1 + d + d(d-1) + d(d-1)^2 + \dots + d(d-1)^{h-1}
    $$
    同样利用等比数列求和公式：
    $$
    n = 1 + d \frac{(d-1)^h - 1}{d-2}
    $$

4.  从此式中，我们可以看出 $n$ 和 $h$ 之间的关系。对于固定的 $d$，当 $h$ 足够大时，$n$ 约等于：
    $$
    n \approx \frac{d}{d-2}(d-1)^h
    $$
    两边取对数：
    $$
    \log(n) \approx \log\left(\frac{d}{d-2}\right) + h \log(d-1)
    $$
    由于 $\log\left(\frac{d}{d-2}\right)$ 是一个常数，我们可以得到：
    $$
    h \approx \frac{\log(n)}{\log(d-1)}
    $$
    其数量级为：
    $$
    h = \Theta\left(\frac{\log(n)}{\log(d)}\right)
    $$

5.  在这类构造的“茂密”树中，其直径 $r$ 大约是高度的两倍，即 $r \approx 2h$。
    $$
    r \approx 2 \frac{\log(n)}{\log(d-1)}
    $$
    因此，其数量级为：
    $$
    r = \Theta\left(\frac{\log(n)}{\log(d)}\right)
    $$
    这表明我们成功构造了一棵满足条件的树，其直径与 $\frac{\log(n)}{\log(d)}$ 具有相同的数量级。

---

### 结论

综合以上两点证明：
1.  任何具有 $n$ 个节点且非叶子节点度为 $d$ 的树，其直径 $r$ 必有一个对数级的下界 $r = \Omega\left(\frac{\log(n)}{\log(d)}\right)$。
2.  存在能达到这个下界数量级的树的构造实例，即 $r = O\left(\frac{\log(n)}{\log(d)}\right)$。

因此，我们可以严谨地得出结论，在这类树中，其（最小）直径的数量级为
$$
r \sim \frac{\log(n)}{\log(d)}
$$

## 示例：世界的“直径”（World Diameter）

- 世界人口（2020）：$n = 7.594$ billion  
- 假设每个人有 $d = 50$ 位朋友/亲属  
- 则  
  $$
  \log(7.594\ \text{b})/\log(50) = 5.85
  $$
- “六度分隔”（Six Degrees of Separation）

---

## “随机”网络中的直径？

### Erdős–Rényi（1959, 1960）随机图
- 从 $n$ 个节点开始  
- 每条边以某个概率 $p$ 独立生成  
- 作为基准模型 “$G(n,p)$”  
- **结果**：具有与树相似的直径/平均路径长度！！

---

## 经验证据：平均最短路径/直径较小

- **Milgram（1967）** 信件实验  
  – 中位数为 5（在到达的 25% 路径中）  

- **WWW**  
  – Adamic, Pitkow（1999）— 平均 3.1（在 5000 万页面中 85.4% 可达）  

- **Facebook**  
  – Backstrom 等（2012）— 平均 4.74（7.21 亿用户）  

- **合作作者（Co-Authorship）研究**  
  – Grossman（1999）数学：平均 7.6，最大 27  
  – Newman（2001）物理：平均 5.9，最大 20  
  – Goyal 等（2004）经济学：平均 9.5，最大 29  

---
## 平均最短路径 vs $\log(n)/\log(d)$

- **84 所高中 – Ad Health**  
- **Golub and Jackson（2012）**  
![[Pasted image 20250919223020.png]]
图示（“Average Shortest Path vs Log(n)/Log(d)”，以及线性拟合 “Linear (Average Shortest Path vs Log(n)/Log(d))”）显示：  
- 预测与数据**吻合良好**，尽管学校在平均度、同质性（homophily）等方面差异很大。  

坐标示意：纵轴刻度从 0 到 7，横轴从 0 到 5。

---

## Erdős Numbers

- Paul Erdős（1913–1996）发表了 1500+ 篇论文…  
- 511 位直接合作者 —— Erdős 号（Erdos # ）$=1$  
- 合作者的合作者 —— Erdős 号 $=2$  
- …  
- 参考：<https://en.wikipedia.org/wiki/Erd%C5%91s_number>

---

## Erdős Numbers（重复）

- Paul Erdős（1913–1996）发表了 1500+ 篇论文…  
- 511 位直接合作者 —— Erdős 号 $=1$  
- 合作者的合作者 —— Erdős 号 $=2$  
- …  
- 2004 年在 eBay 上拍卖与 William Tozier（Erdős 号 $=4$）的合著，竞拍者支付 $>1000\$$  

---

## Erdős Numbers（链接）

<https://en.wikipedia.org/wiki/Erd%C5%91s_number>  

**类似**： “Six Degrees of Kevin Bacon”  
<https://en.wikipedia.org/wiki/Six_Degrees_of_Kevin_Bacon>

---

## 到目前为止的总结

- 网络在许多互动中普遍且重要（劳动力市场、犯罪、服装产业、风险分担……）  
- 尽管复杂，社会网络具有可识别的特征：  
  – 一个**巨型连通分量**（giant component）  
  – **较小**的平均和最大路径长度（直径）  
  – **度分布**呈现不同形状（有时较纯随机更“厚尾”）  
  – 相对泊松网络具有**高聚类性**  
  – 存在多种**中心性/影响力/声望**度量……
